# ü§ñ CerosAI - Bot WhatsApp Inteligente com Control Panel

Um bot avan√ßado para WhatsApp que integra com modelos de IA local, oferecendo conversas inteligentes com sistema robusto de mem√≥ria, backup autom√°tico, Control Panel desktop e gerenciamento via PM2.

![Status](https://img.shields.io/badge/Status-Est√°vel-success)
![Node](https://img.shields.io/badge/Node.js-18+-green)
![License](https://img.shields.io/badge/License-MIT-blue)
![Windows](https://img.shields.io/badge/Windows-Compatible-blue)

## üåü Caracter√≠sticas Principais

- üß† **IA Local**: Integra√ß√£o com LM Studio, Ollama, OpenAI
- ‚ö° **Sincroniza√ß√£o Autom√°tica**: Configura√ß√µes `.env` aplicadas em tempo real
- üíæ **Mem√≥ria Persistente**: Sistema robusto de armazenamento de conversas
- üñ•Ô∏è **Control Panel Desktop**: Interface gr√°fica completa com Electron
- üîí **Rate Limiting**: Prote√ß√£o contra spam e uso abusivo
- üì¶ **Backup Autom√°tico**: Sistema completo de backup e restaura√ß√£o
- üõ†Ô∏è **Comandos Admin**: Controle total via WhatsApp ou Control Panel
- üìä **Monitoramento**: Logs detalhados, estat√≠sticas e health checks
- üîÑ **PM2 Management**: Gerenciamento profissional de processos
- üéõÔ∏è **Hot Reload**: Altera√ß√µes de configura√ß√£o sem reiniciar
- ü™ü **Windows Optimized**: Totalmente compat√≠vel com Windows

## üöÄ Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos
- Node.js 18+ 
- PM2 (`npm install -g pm2`)
- Modelo de IA local (LM Studio, Ollama, etc.)
- Windows 10/11 (recomendado)

### 1. Clone e Instale
```bash
git clone https://github.com/ynkjohn/CerosBOT-for-whatsapp.git
cd CerosBOT-for-whatsapp
npm install
```

### 2. Configura√ß√£o do Control Panel
```bash
cd control-panel
npm install
```

### 3. Configura√ß√£o Inicial
```bash
# Copie e configure o arquivo de ambiente
cp .env.example .env

# Configure seu n√∫mero admin (OBRIGAT√ìRIO)
# Edite .env e coloque seu n√∫mero em ADMIN_NUMBERS
```

‚ö†Ô∏è **IMPORTANTE**: Configure seu n√∫mero admin:
```env
ADMIN_NUMBERS=5511999887766  # SEU N√öMERO (s√≥ n√∫meros)
```

### 4. Inicie o Sistema

**ÔøΩ M√©todo Principal (Otimizado):**
```
Clique duplo em: start-bot.bat
```

**O que acontece:**
- ‚úÖ Para processos antigos automaticamente
- ‚úÖ Inicia bot via PM2 (1 processo limpo)
- ‚úÖ Abre Control Panel automaticamente
- ‚úÖ Mostra status e comandos √∫teis
- ‚úÖ Fecha janela (bot continua rodando)

**Alternativas via terminal:**
```bash
npm run start-bot          # Mesmo que o .bat
npm run pm2:start          # S√≥ o bot
cd control-panel && npm start  # S√≥ o Control Panel
```

> ‚úÖ **Problema resolvido**: O `start-bot.bat` agora √© otimizado e n√£o abre m√∫ltiplas janelas CMD

## üñ•Ô∏è Control Panel - Interface Desktop

O Control Panel oferece controle completo via interface gr√°fica:

### üìä **Dashboard**
- Status do bot em tempo real
- Estat√≠sticas de uso e mem√≥ria
- Conex√£o com LLM/IA
- Uptime e performance

### üìã **Logs**
- Visualiza√ß√£o de logs em tempo real
- Filtros por tipo e data
- Exporta√ß√£o de logs
- Limpeza autom√°tica

### üì¶ **Backups**
- Lista todos os backups dispon√≠veis
- Cria√ß√£o manual de backups
- Restaura√ß√£o com um clique
- Limpeza de backups antigos

### üë• **Sistema de Usu√°rios (Implementado)**
- **Gerenciamento completo** via Control Panel e API
- **Cria√ß√£o/remo√ß√£o** de usu√°rios autorizados
- **Autentica√ß√£o segura** com senhas criptografadas
- **Controle de sess√µes** ativas
- **Estat√≠sticas detalhadas** por usu√°rio
- **Rate limiting individual** configur√°vel
- **Logs de atividade** por usu√°rio
- **Interface amig√°vel** para administra√ß√£o

### üîß **A√ß√µes**
- **Reiniciar Bot**: Restart completo via PM2
- **Limpar Mem√≥ria**: Reset do sistema de mem√≥ria
- **Reset Rate Limit**: Limpar limites de uso
- **Testar IA**: Verificar conex√£o com LLM
- **Backup Manual**: Criar backup instant√¢neo

### üìà **Atividades**
- Log de todas as mensagens processadas
- Hist√≥rico de intera√ß√µes
- Estat√≠sticas de uso
- Monitoramento em tempo real

## ‚öôÔ∏è Configura√ß√£o Detalhada (.env)

```env
# ===== CONFIGURA√á√ïES OBRIGAT√ìRIAS =====

# Configura√ß√µes do LLM/IA
API_ENDPOINT=http://localhost:1234/v1/chat/completions
MODEL_NAME=llama-3.1-8b-lexi-uncensored-v2

# Administradores (IMPORTANTE!)
ADMIN_NUMBERS=seu_numero_aqui   # Exemplo: 5511999999999

# ===== CONFIGURA√á√ïES OPCIONAIS =====

# Bot Behavior
GROUP_RANDOM_CHANCE=0.25        # 25% chance de responder em grupos
DUPLICATE_TIMEOUT=5000          # Timeout para mensagens duplicadas

# Mem√≥ria
MAX_HISTORY_MESSAGES=50         # M√°ximo por conversa
MEMORY_FILE=memoria.json

# Rate Limiting
MAX_REQUESTS_PER_MINUTE=10
MAX_REQUESTS_PER_HOUR=50

# Backup
MAX_BACKUPS=10
BACKUP_DIR=./backups

# LLM Settings
MAX_TOKENS=800
TEMPERATURE=0.75
REQUEST_TIMEOUT=30000
MAX_RETRIES=3

# API Control Panel
PORT=3001                   # Porta da API
```

## ‚ö° Sincroniza√ß√£o Autom√°tica (.env)

### üîÑ **Como Funciona**
O CerosAI agora monitora o arquivo `.env` em tempo real e aplica mudan√ßas automaticamente:

1. **Edite qualquer configura√ß√£o** no arquivo `.env`
2. **Salve o arquivo** - o bot detecta a mudan√ßa automaticamente  
3. **Configura√ß√µes s√£o aplicadas** sem reiniciar o bot
4. **Logs confirmam** a atualiza√ß√£o no terminal

### ‚öôÔ∏è **Configura√ß√µes Sincronizadas**
- `MODEL_NAME` - Troca de modelo instant√¢nea
- `API_ENDPOINT` - Novo servidor LLM  
- `MAX_TOKENS` - Limite de tokens
- `TEMPERATURE` - Criatividade da IA
- `TOP_P` - Par√¢metro de sampling
- `REQUEST_TIMEOUT` - Timeout de requisi√ß√µes
- `MAX_RETRIES` - Tentativas de retry

### üìù **Exemplo Pr√°tico**
```bash
# 1. Altere no .env
MODEL_NAME=nova-llama-3.1-70b

# 2. Salve o arquivo (Ctrl+S)

# 3. Veja no terminal:
[INFO] üîÑ Configura√ß√µes do LLM atualizadas automaticamente  
[INFO] üìù Novo modelo: nova-llama-3.1-70b
[INFO] üåê Endpoint: http://192.168.1.100:1234
```

**üí° Vantagem**: Teste diferentes modelos e configura√ß√µes sem interromper conversas!

## üß† Sistema Multi-LLM (Implementado)

### üéØ **Suporte Completo a M√∫ltiplos Modelos**
O CerosAI j√° possui suporte completo para m√∫ltiplos modelos de IA, permitindo troca din√¢mica sem interrup√ß√£o:

#### ‚ö° **Troca Din√¢mica de Modelos**
- **Configura√ß√£o em tempo real** via arquivo `.env`
- **Sem reinicializa√ß√£o** do bot necess√°ria
- **Failover autom√°tico** entre servidores
- **Configura√ß√µes espec√≠ficas** por modelo

#### üîß **Como Usar**
```env
# Servidor Principal
API_ENDPOINT=http://192.168.1.100:1234/v1/chat/completions
MODEL_NAME=llama-3.1-70b-instruct

# Troque o modelo instantaneamente:
MODEL_NAME=phi-3.5-mini-instruct

# Ou mude o servidor:
API_ENDPOINT=http://localhost:11434/v1/chat/completions
MODEL_NAME=qwen2.5:14b
```

#### üìä **Modelos Testados e Compat√≠veis**
- **LM Studio**: Llama 3.1, Phi-3, Qwen, Gemma
- **Ollama**: Todos os modelos com endpoint OpenAI
- **OpenAI API**: GPT-3.5, GPT-4, GPT-4o
- **LocalAI**: Modelos locais customizados
- **Text Generation WebUI**: Com modo OpenAI

#### üéõÔ∏è **Configura√ß√µes Avan√ßadas por Modelo**
```env
# Configura√ß√£o espec√≠fica para cada modelo
MAX_TOKENS=2048          # Llama modelos maiores
TEMPERATURE=0.7          # Criatividade
TOP_P=0.9               # Sampling
REQUEST_TIMEOUT=45000    # Timeout para modelos lentos
```

#### üîÑ **Monitoramento e Teste**
- **Via WhatsApp**: `/testllm` verifica conex√£o atual
- **Via Control Panel**: Bot√£o "Testar IA" na interface
- **Logs autom√°ticos**: Confirma√ß√£o de troca de modelo
- **Health check**: Script autom√°tico de verifica√ß√£o

## ÔøΩ API REST Avan√ßada (Implementada)

### üéØ **Endpoints Completos**
O CerosAI possui uma API REST robusta com endpoints para controle total:

#### üìä **Status e Monitoramento**
- `GET /api/status` - Status geral do sistema
- `GET /api/stats` - Estat√≠sticas detalhadas
- `GET /api/logs` - Logs recentes com filtros

#### ‚öôÔ∏è **Configura√ß√µes**
- `GET /api/config` - Obter configura√ß√µes atuais
- `POST /api/config` - Salvar configura√ß√µes
- `POST /api/test-llm` - Testar conex√£o LLM

#### üíæ **Backup e Restaura√ß√£o**
- `GET /api/backups` - Listar backups dispon√≠veis
- `POST /api/backups` - Criar backup manual
- `POST /api/backups/restore/:id` - Restaurar backup
- `DELETE /api/backups/:filename` - Deletar backup

#### üë• **Gerenciamento de Usu√°rios**
- `GET /api/users` - Listar usu√°rios
- `POST /api/users` - Criar usu√°rio
- `DELETE /api/users/:username` - Remover usu√°rio

#### üéõÔ∏è **A√ß√µes do Sistema**
- `POST /api/actions` - Executar a√ß√µes (cleanup, reset rate limit, etc.)
- Suporte a m√∫ltiplas a√ß√µes via par√¢metro `action`

### üîí **Recursos da API**
- **CORS habilitado** para acesso do Control Panel
- **Valida√ß√£o de entrada** em todos os endpoints
- **Tratamento de erros** padronizado
- **Logs estruturados** de todas as requisi√ß√µes
- **Respostas JSON** consistentes

## üîß Troubleshooting Avan√ßado

### ü©∫ **Diagn√≥stico Autom√°tico**
Execute o comando de diagn√≥stico completo:
```bash
npm run health
```

**O que √© verificado:**
- ‚úÖ Vari√°veis de ambiente obrigat√≥rias
- ‚úÖ Conex√£o com LLM/IA
- ‚úÖ Sistema de mem√≥ria e backup
- ‚úÖ Performance e recursos
- ‚úÖ Integridade dos dados

### ‚ùå **Problemas Comuns e Solu√ß√µes**

#### üîå **Erro de Conex√£o LLM**
```
ERRO [CONNECTION] [ALTA] fetch failed
```

**Solu√ß√µes:**
1. **Verifique se LM Studio est√° rodando**
   ```bash
   # Teste manual
   curl http://localhost:1234/v1/chat/completions
   ```

2. **Teste diferentes endpoints**
   ```env
   # LM Studio
   API_ENDPOINT=http://localhost:1234/v1/chat/completions
   
   # Ollama
   API_ENDPOINT=http://localhost:11434/v1/chat/completions
   
   # IP espec√≠fico
   API_ENDPOINT=http://192.168.1.100:1234/v1/chat/completions
   ```

3. **Ajuste firewall/antiv√≠rus**
   - Libere porta 1234 no Windows Defender
   - Adicione exce√ß√£o para LM Studio

#### ‚è∞ **Timeouts Constantes**
```
ERRO [TIMEOUT] [ALTA] Timeout ap√≥s 30000ms
```

**Solu√ß√µes:**
1. **Ajuste configura√ß√µes de performance**
   ```env
   REQUEST_TIMEOUT=120000    # 2 minutos
   MAX_TOKENS=400           # Reduzir tokens
   MAX_HISTORY_MESSAGES=10  # Menos contexto
   ```

2. **Otimiza√ß√£o autom√°tica**
   ```bash
   npm run optimize
   ```

3. **Use modelo mais r√°pido**
   ```env
   MODEL_NAME=phi-3.5-mini-instruct  # Modelo menor
   ```

#### üíæ **Problemas de Mem√≥ria**
```
ERRO [MEMORY] Arquivo muito grande
```

**Solu√ß√µes:**
1. **Limpeza autom√°tica**
   ```bash
   npm run cleanup
   ```

2. **Configurar limites**
   ```env
   MAX_HISTORY_MESSAGES=30
   MAX_MEMORY_ENTRIES=500
   ```

3. **Via Control Panel**
   - Acesse "A√ß√µes" ‚Üí "Limpar Mem√≥ria"

#### üì± **WhatsApp Desconectado**
```
ERRO [WHATSAPP_AUTH] QR Code expirado
```

**Solu√ß√µes:**
1. **Delete dados de autentica√ß√£o**
   ```bash
   rm -rf wwebjs_auth/
   npm start
   ```

2. **Escaneie novo QR Code**
   - Aguarde aparecer no terminal
   - Use WhatsApp ‚Üí Aparelhos Conectados

### üöÄ **Otimiza√ß√£o de Performance**

#### ‚ö° **Script de Otimiza√ß√£o Autom√°tica**
```bash
npm run optimize
```

**O que faz:**
- Testa velocidade do modelo atual
- Aplica configura√ß√µes otimizadas automaticamente
- Sugere melhorias espec√≠ficas
- Salva configura√ß√µes no `.env`

#### üéØ **Configura√ß√µes por Velocidade de Modelo**

**Modelo R√°pido (< 30s):**
```env
MAX_HISTORY_MESSAGES=20
MAX_TOKENS=800
TEMPERATURE=0.75
REQUEST_TIMEOUT=60000
```

**Modelo Lento (> 60s):**
```env
MAX_HISTORY_MESSAGES=5
MAX_TOKENS=200
TEMPERATURE=0.6
REQUEST_TIMEOUT=180000
```

#### üìä **Monitoramento de Performance**
```bash
# Status em tempo real
npm run health

# An√°lise de erros
npm run analyze-errors

# Estat√≠sticas detalhadas
npm run test-intelligence
```

### üÜò **Suporte e Debug**

#### üìã **Coletando Informa√ß√µes para Suporte**
```bash
# 1. Status completo
npm run health > diagnostico.txt

# 2. Logs recentes
npm run analyze-errors >> diagnostico.txt

# 3. Configura√ß√£o atual (sem dados sens√≠veis)
cat .env | grep -v API_KEY >> diagnostico.txt
```

#### üîç **Logs Detalhados**
```bash
# Ver logs em tempo real
npm run pm2:logs

# Logs estruturados
tail -f logs/bot.log
```

#### üß™ **Modo Debug**
```env
LOG_LEVEL=debug  # Logs detalhados
```

---

## üìö API Documentation

### üåê **Base URL**
```
http://localhost:3001/api
```

### üîê **Seguran√ßa**
- **CORS**: Configurado para localhost e Electron
- **Rate Limiting**: 100 req/min por IP
- **Valida√ß√£o**: Entrada validada em todos endpoints
- **Headers de Seguran√ßa**: X-Frame-Options, X-Content-Type-Options

### üìä **Endpoints de Status**

#### `GET /api/status`
Retorna status geral do sistema com m√©tricas b√°sicas.

**Query Parameters:**
- `detailed` (boolean): Include m√©tricas detalhadas

**Response:**
```json
{
  "success": true,
  "data": {
    "bot": {
      "connected": true,
      "uptime": 3600,
      "health": 95
    },
    "memory": {
      "totalChats": 150,
      "totalMessages": 2500,
      "memorySizeMB": 2.3
    },
    "performance": {
      "avgResponseTime": 15,
      "successRate": 98.5,
      "throughput": 12
    },
    "errors": {
      "recentCount": 2,
      "criticalCount": 0,
      "errorRate": 0.1
    }
  }
}
```

#### `GET /api/stats`
Estat√≠sticas detalhadas com an√°lise de performance.

**Query Parameters:**
- `timeframe` (string): '1h', '24h', '7d', 'all'
- `includePatterns` (boolean): Incluir padr√µes de erro

**Response:**
```json
{
  "success": true,
  "data": {
    "overview": {
      "healthScore": 92,
      "uptime": 3600,
      "avgResponseTime": 15,
      "successRate": 98.5
    },
    "performance": {
      "trends": {
        "direction": "stable",
        "percentage": 2
      }
    },
    "errors": {
      "patterns": [
        {
          "pattern": "connection:NetworkError",
          "frequency": 0.2,
          "count": 5
        }
      ]
    }
  }
}
```

### ‚öôÔ∏è **Endpoints de Configura√ß√£o**

#### `GET /api/config`
Obter configura√ß√µes atuais do .env.

**Query Parameters:**
- `secure` (boolean): Ocultar valores sens√≠veis (default: true)

**Response:**
```json
{
  "success": true,
  "data": {
    "API_ENDPOINT": "http://localhost:1234/v1/chat/completions",
    "MODEL_NAME": "llama-3.1-8b",
    "MAX_TOKENS": "800",
    "API_KEY": "********"
  },
  "metadata": {
    "totalKeys": 25,
    "hiddenKeys": 2,
    "lastModified": "2025-01-21T10:30:00Z"
  }
}
```

#### `POST /api/config`
Salvar configura√ß√µes no .env com valida√ß√£o.

**Body:**
```json
{
  "MAX_TOKENS": "1000",
  "TEMPERATURE": "0.8",
  "MODEL_NAME": "new-model"
}
```

**Validation Rules:**
- `MAX_TOKENS`: 50-8192
- `TEMPERATURE`: 0.0-2.0
- `REQUEST_TIMEOUT`: > 0
- `API_ENDPOINT`: Valid URL format

**Response:**
```json
{
  "success": true,
  "message": "Configura√ß√£o salva com sucesso",
  "updatedKeys": ["MAX_TOKENS", "TEMPERATURE"]
}
```

### üß™ **Endpoints de Teste**

#### `POST /api/test-llm`
Testar conex√£o com LLM atual.

**Response:**
```json
{
  "success": true,
  "data": {
    "success": true,
    "working": true,
    "response": "OK",
    "responseTime": 1200
  },
  "timestamp": "2025-01-21T10:30:00Z"
}
```

### üìã **Endpoints de Logs**

#### `GET /api/logs`
Obter logs recentes com filtros avan√ßados.

**Query Parameters:**
- `limit` (number): 1-500 (default: 100)
- `severity` (string): 'low', 'medium', 'high'
- `category` (string): 'connection', 'timeout', 'memory', etc.

**Response:**
```json
{
  "success": true,
  "data": {
    "errors": [
      {
        "id": "error_1642751234567_abc123",
        "category": "connection",
        "severity": "high",
        "message": "fetch failed",
        "timestamp": "2025-01-21T10:30:00Z",
        "possibleCauses": ["Servidor LLM offline"],
        "suggestedFixes": ["Verificar se LM Studio est√° rodando"]
      }
    ],
    "stats": {
      "overview": {
        "recentErrorsCount": 1,
        "errorRate": 0.1
      }
    }
  },
  "metadata": {
    "totalReturned": 1,
    "limitApplied": 100
  }
}
```

#### `DELETE /api/logs`
Limpar todos os logs de erro.

**Response:**
```json
{
  "success": true,
  "message": "Logs limpos com sucesso",
  "data": {
    "clearedErrors": 25,
    "clearedAt": "2025-01-21T10:30:00Z"
  }
}
```

### üéõÔ∏è **Endpoints de A√ß√µes**

#### `POST /api/actions/:action`
Executar a√ß√µes do sistema.

**Available Actions:**
- `clear-memory`: Limpar toda mem√≥ria
- `cleanup-chats`: Limpar chats inativos
- `reset-rate-limit`: Resetar rate limiting
- `create-backup`: Criar backup manual
- `restart-bot`: Reiniciar bot via PM2

**Example - Cleanup chats:**
```bash
POST /api/actions/cleanup-chats
Content-Type: application/json

{
  "params": {
    "days": 30
  }
}
```

**Response:**
```json
{
  "success": true,
  "message": "Cleanup conclu√≠do! 15 chats removidos.",
  "data": {
    "removedChats": 15,
    "removedMessages": 450
  }
}
```

### üíæ **Endpoints de Backup**

#### `GET /api/backups`
Listar backups dispon√≠veis.

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "filename": "backup_2025-01-21_10-30.json",
      "size": "2.5MB",
      "created": "2025-01-21T10:30:00Z",
      "type": "automatic"
    }
  ]
}
```

#### `POST /api/backups/restore/:id`
Restaurar backup espec√≠fico.

**Response:**
```json
{
  "success": true,
  "message": "Backup restaurado com sucesso!",
  "data": {
    "restoredChats": 150,
    "restoredMessages": 2500
  }
}
```

### üö´ **Error Responses**
Todos os endpoints seguem o padr√£o de erro:

```json
{
  "success": false,
  "error": "Mensagem de erro",
  "field": "campo_com_erro",
  "details": ["Detalhes adicionais"]
}
```

**HTTP Status Codes:**
- `400`: Bad Request (valida√ß√£o falhou)
- `429`: Too Many Requests (rate limit)
- `500`: Internal Server Error

## üéÆ Comandos do Bot

### üë§ **Comandos de Usu√°rio**
| Comando | Descri√ß√£o |
|---------|-----------|
| `/help` | Lista de comandos dispon√≠veis |
| `/ping` | Teste de conex√£o |  
| `/status` | Status do bot |
| `/limits` | Seus limites de uso |

### üîß **Comandos de Admin**

#### Informa√ß√µes
- `/status` - Status geral do sistema
- `/stats` - Estat√≠sticas detalhadas  
- `/memory` - Informa√ß√µes da mem√≥ria
- `/ratelimit` - Stats de rate limiting
- `/testllm` - Testa conex√£o com IA

#### Manuten√ß√£o
- `/limparmemoria` - Limpa toda a mem√≥ria
- `/cleanup [dias]` - Remove chats inativos
- `/resetrate [numero]` - Reseta rate limit
- `/backup` - Cria backup manual
- `/backups` - Lista backups dispon√≠veis
- `/restore [id]` - Restaura backup

#### Sistema
- `/reiniciar` - Reinicia o bot via PM2

## üîß Scripts Dispon√≠veis

### üöÄ Controle Principal
```bash
# Arquivos .bat (duplo clique)
start-bot.bat             # Iniciar sistema (OTIMIZADO)
stop-system.bat           # Parar sistema

# Via NPM  
npm run start-bot         # Mesmo que start-bot.bat
npm run stop-bot          # Parar sistema
```

### PM2 (Produ√ß√£o)
```bash
npm run pm2:start         # Inicia com PM2
npm run pm2:stop          # Para o bot
npm run pm2:restart       # Reinicia o bot
npm run pm2:logs          # Visualiza logs
npm run pm2:monit         # Monitor PM2
```

### Desenvolvimento
```bash
npm start                 # Inicia em modo normal
npm run dev              # Modo desenvolvimento (watch)
```

### Utilit√°rios
```bash
npm run setup            # Configura√ß√£o inicial
npm run health           # Teste de sa√∫de completo
npm run backup           # Gerenciar backups
npm run cleanup          # Limpeza de arquivos
npm run analyze-errors   # An√°lise de erros
```

## ‚ö° **start-bot.bat Otimizado**

**Problema resolvido**: M√∫ltiplos terminais CMD  
**Solu√ß√£o**: `start-bot.bat` agora √© limpo e otimizado

### Antes vs Agora:
| Antes | Agora |
|-------|-------|
| 3+ janelas CMD abertas | 1 janela (fecha automaticamente) |
| M√∫ltiplos processos node.js | 1 processo PM2 |
| Dif√≠cil gerenciar | Interface limpa |
| Processos √≥rf√£os | Controle total |

**Uso:** Simplesmente clique duplo em `start-bot.bat` ‚úÖ

## üèóÔ∏è Estrutura do Projeto

```
CerosAI/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.js                    # Arquivo principal do bot
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.js            # Servidor da API Control Panel
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îú‚îÄ‚îÄ memory.js            # Sistema de mem√≥ria (reformulado)
‚îÇ       ‚îú‚îÄ‚îÄ llm.js               # Integra√ß√£o com IA
‚îÇ       ‚îú‚îÄ‚îÄ commands.js          # Comandos do bot
‚îÇ       ‚îú‚îÄ‚îÄ rateLimit.js         # Controle de rate limiting
‚îÇ       ‚îú‚îÄ‚îÄ backup.js            # Sistema de backup
‚îÇ       ‚îú‚îÄ‚îÄ auth.js              # Sistema de autentica√ß√£o
‚îÇ       ‚îú‚îÄ‚îÄ logger.js            # Sistema de logs
‚îÇ       ‚îú‚îÄ‚îÄ performance.js       # Monitor de performance
‚îÇ       ‚îú‚îÄ‚îÄ errorHandler.js      # Tratamento de erros
‚îÇ       ‚îî‚îÄ‚îÄ activityLogger.js    # Log de atividades
‚îú‚îÄ‚îÄ control-panel/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.js              # Electron main process
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.js               # Interface do Control Panel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html           # Interface HTML
‚îÇ   ‚îî‚îÄ‚îÄ package.json             # Depend√™ncias do Control Panel
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ setup.js                 # Configura√ß√£o inicial
‚îÇ   ‚îú‚îÄ‚îÄ health.js                # Health check completo
‚îÇ   ‚îú‚îÄ‚îÄ backup.js                # Gerenciador de backups
‚îÇ   ‚îú‚îÄ‚îÄ cleanup.js               # Limpeza autom√°tica
‚îÇ   ‚îú‚îÄ‚îÄ analyze-errors.js        # An√°lise de erros
‚îÇ   ‚îî‚îÄ‚îÄ optimize.js              # Otimiza√ß√µes
‚îú‚îÄ‚îÄ backups/                     # Backups autom√°ticos
‚îú‚îÄ‚îÄ logs/                        # Logs do sistema
‚îú‚îÄ‚îÄ wwebjs_auth/                 # Sess√£o do WhatsApp
‚îú‚îÄ‚îÄ ecosystem.config.cjs         # Configura√ß√£o PM2
‚îú‚îÄ‚îÄ .env                         # Configura√ß√µes principais
‚îú‚îÄ‚îÄ memoria.json                 # Mem√≥ria das conversas
‚îî‚îÄ‚îÄ README.md                    # Esta documenta√ß√£o
```

## üîç Monitoramento e Logs

### Health Check Autom√°tico
```bash
npm run health
```
**Verifica:**
- ‚úÖ Conex√£o com LLM
- ‚úÖ Sistema de mem√≥ria
- ‚úÖ Sistema de backup
- ‚úÖ Configura√ß√µes do .env
- ‚úÖ Depend√™ncias instaladas

### Logs Detalhados
- **PM2 Logs**: `npm run pm2:logs`
- **Error Logs**: `logs/errors/`
- **Activity Logs**: `logs/activity.json`
- **Control Panel**: Interface gr√°fica de logs

### Estat√≠sticas em Tempo Real
- **Via WhatsApp**: `/stats` (admin)
- **Via Control Panel**: Dashboard completo
- **Via API**: `http://localhost:3001/api/status`

## üõ°Ô∏è Seguran√ßa e Backup

### Controle de Acesso
- Apenas n√∫meros em `ADMIN_NUMBERS` podem usar comandos admin
- Rate limiting autom√°tico por usu√°rio
- Sess√£o do WhatsApp protegida

### Sistema de Backup
- **Autom√°tico**: A cada 6 horas
- **Manual**: Via comando ou Control Panel
- **Antes de opera√ß√µes destrutivas**
- **Limpeza autom√°tica** de backups antigos

### Rate Limiting Inteligente
- Limites por minuto e por hora
- Reset autom√°tico
- Bypass para admins
- Logs de tentativas bloqueadas

## üö® Solu√ß√£o de Problemas

### Bot n√£o conecta ao WhatsApp
```bash
# 1. Verificar health
npm run health

# 2. Limpar sess√£o
rm -rf wwebjs_auth/

# 3. Reiniciar
npm run pm2:restart
```

### IA n√£o responde
```bash
# 1. Testar conex√£o LLM
curl http://localhost:1234/v1/chat/completions

# 2. Verificar no Control Panel
# A√ß√µes > Testar IA

# 3. Verificar configura√ß√µes
grep API_ENDPOINT .env
```

### Control Panel n√£o abre
```bash
# 1. Verificar se API est√° rodando
curl http://localhost:3001/api/status

# 2. Reinstalar depend√™ncias
cd control-panel && npm install

# 3. Verificar porta
netstat -an | grep 3001
```

### Mem√≥ria corrompida
```bash
# 1. Backup atual
npm run backup

# 2. Reset mem√≥ria
rm memoria.json
echo '{}' > memoria.json

# 3. Reiniciar
npm run pm2:restart
```

### Problemas com PM2
```bash
# 1. Status do PM2
pm2 status

# 2. Reiniciar daemon
pm2 kill && pm2 resurrect

# 3. Logs detalhados
pm2 logs cerosai-bot
```

## üîÑ Hist√≥rico de Vers√µes

### üéâ **v1.0 - Vers√£o Est√°vel Completa** (Atual)

#### ‚ú® **Sistema Completo Implementado**
- **üîÑ Sincroniza√ß√£o Autom√°tica**: Monitoramento do arquivo `.env` em tempo real
- **‚ö° Configura√ß√£o Din√¢mica**: Suporte multi-LLM com troca autom√°tica de modelos
- **üñ•Ô∏è Control Panel Desktop**: Interface gr√°fica completa com Electron
- **üìä API REST Avan√ßada**: Endpoints completos para gerenciamento total
- **üë• Sistema de Usu√°rios**: Gerenciamento completo de usu√°rios e permiss√µes
- **üíæ Backup Autom√°tico**: Sistema robusto de backup e restaura√ß√£o
- **üõ°Ô∏è Rate Limiting**: Prote√ß√£o inteligente contra spam
- **ÔøΩ Logs Estruturados**: Sistema completo de logging e monitoramento
- **üîß PM2 Integration**: Gerenciamento profissional de processos
- **üñ•Ô∏è Windows Optimization**: Compatibilidade total com Windows

#### üõ†Ô∏è **Funcionalidades T√©cnicas**
- Sistema `fs.watchFile()` para monitoramento cont√≠nuo do .env
- Configura√ß√£o din√¢mica de LLM sem reinicializa√ß√£o
- Control Panel com dashboard completo e estat√≠sticas em tempo real
- API REST com endpoints para backup, usu√°rios, configura√ß√µes e monitoramento
- Sistema de health check autom√°tico
- Valida√ß√£o autom√°tica de configura√ß√µes

#### üìã **Multi-LLM Implementado**
- Troca din√¢mica entre modelos via configura√ß√£o
- Suporte para m√∫ltiplos endpoints simultaneamente
- Configura√ß√µes espec√≠ficas por modelo
- Failover autom√°tico entre servidores

---

### üìö **Vers√µes Anteriores (Hist√≥rico)**

### **v0.2 - Melhorias e Otimiza√ß√µes** (20/09/2025)

#### ‚úÖ **Corre√ß√µes Importantes**
- **üîß Bot√£o Reiniciar**: Funcionalidade via PM2
- **üñ•Ô∏è Control Panel**: Corre√ß√µes de interface
- **üìã Logs**: Melhorias na exibi√ß√£o
- **üìà Atividades**: Implementa√ß√£o do monitoramento
- **ü™ü Windows**: Compatibilidade aprimorada
- **üíæ Sistema de Mem√≥ria**: Reformula√ß√£o inicial

#### üÜï **Funcionalidades B√°sicas**
- **üîÑ PM2 Integration**: Integra√ß√£o inicial
- **üñ•Ô∏è Desktop Control Panel**: Desenvolvimento da interface
- **üìä Basic Monitoring**: Estat√≠sticas b√°sicas
- **üîç Health Check**: Verifica√ß√µes iniciais

### **v0.1 - Rebrand para CerosAI** (18/09/2025)
- üÜï **BREAKING**: Renomea√ß√£o de "Fernando AI" para "CerosAI"
- üìÑ Licen√ßa MIT adicionada
- üîÑ Identidade visual renovada
- üìö Documenta√ß√£o inicial

## ü§ù Contribui√ß√£o

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a **Licen√ßa MIT**. Veja o arquivo [LICENSE](LICENSE) para detalhes.

**O que isso significa:**
- ‚úÖ **Uso livre**: Para qualquer prop√≥sito
- ‚úÖ **Modifica√ß√µes**: Altere como quiser
- ‚úÖ **Distribui√ß√£o**: Compartilhe √† vontade
- ‚úÖ **Uso comercial**: Permitido
- ‚ö†Ô∏è **Sem garantias**: Use por sua conta e risco

## üéØ Roadmap

### ‚úÖ **Funcionalidades Implementadas**
- [x] **Sincroniza√ß√£o Autom√°tica do .env**: Configura√ß√µes atualizadas em tempo real
- [x] **Suporte Multi-LLM**: Troca din√¢mica entre diferentes modelos via configura√ß√£o
- [x] **Control Panel Desktop**: Interface gr√°fica completa com Electron
- [x] **PM2 Integration**: Gerenciamento profissional de processos
- [x] **API REST Avan√ßada**: Endpoints completos para gerenciamento total
- [x] **Sistema de Backup**: Backup autom√°tico e manual completo
- [x] **Rate Limiting**: Prote√ß√£o inteligente contra spam
- [x] **Sistema de Mem√≥ria**: Armazenamento persistente de conversas
- [x] **Health Monitoring**: Verifica√ß√µes autom√°ticas do sistema
- [x] **Windows Optimization**: Compatibilidade total com Windows
- [x] **Sistema de Usu√°rios**: Gerenciamento completo de usu√°rios e permiss√µes
- [x] **Logs Estruturados**: Sistema completo de logging e monitoramento
- [x] **Dashboard Analytics**: M√©tricas em tempo real e estat√≠sticas detalhadas
- [x] **Configura√ß√£o Din√¢mica**: Recarregamento autom√°tico de configura√ß√µes

### üîÆ **Pr√≥ximas Vers√µes (v1.1+)**
- [ ] **Interface Web**: Dashboard web responsivo para acesso remoto  
- [ ] **Sistema de Plugins**: Arquitetura extens√≠vel para funcionalidades
- [ ] **Integra√ß√£o Discord**: Expans√£o para outras plataformas
- [ ] **Containeriza√ß√£o**: Suporte completo a Docker
- [ ] **Auto-Update**: Sistema de atualiza√ß√µes autom√°ticas
- [ ] **Multi-Admin**: Suporte a m√∫ltiplos n√≠veis de administra√ß√£o
- [ ] **Scheduler**: Tarefas programadas e automa√ß√µes
- [ ] **Database Support**: Integra√ß√£o com PostgreSQL/MySQL
- [ ] **Cluster Support**: Suporte a m√∫ltiplas inst√¢ncias
- [ ] **WebHooks**: Sistema de notifica√ß√µes externas

## üìû Suporte

- üìß **Issues**: [GitHub Issues](https://github.com/ynkjohn/CerosBOT-for-whatsapp/issues)
- üí¨ **Discuss√µes**: [GitHub Discussions](https://github.com/ynkjohn/CerosBOT-for-whatsapp/discussions)
- üìö **Wiki**: [Documenta√ß√£o Detalhada](https://github.com/ynkjohn/CerosBOT-for-whatsapp/wiki)
- üìã **Changelog**: [CHANGELOG.md](CHANGELOG.md) - Hist√≥rico detalhado de mudan√ßas

---

<div align="center">

**CerosAI** - Tornando conversas mais inteligentes! ü§ñ‚ú®

[![GitHub stars](https://img.shields.io/github/stars/ynkjohn/CerosBOT-for-whatsapp?style=social)](https://github.com/ynkjohn/CerosBOT-for-whatsapp/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/ynkjohn/CerosBOT-for-whatsapp?style=social)](https://github.com/ynkjohn/CerosBOT-for-whatsapp/network/members)

</div>
